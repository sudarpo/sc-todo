(this["webpackJsonpsc-todo"]=this["webpackJsonpsc-todo"]||[]).push([[0],{23:function(e,t,a){e.exports=a(52)},50:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),s=a.n(c),o=a(5),l=a(3),i=a(2),u=a(8),m=a(1),d=a.n(m),p=a(6);function b(e){var t=e.tasksList,a=e.onTaskComplete,n=e.onTaskUndoComplete,c=e.onTaskDelete,s=e.onTaskEdit,o=t.filter((function(e){return!1===e.completed})).length,l=t.length-o;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},t.length," tasks ~ ",o," pending ~ ",l," ","completed"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"list-group"},t.map((function(e){return r.a.createElement("div",{className:"list-group-item",key:e.id},r.a.createElement("i",{className:"fa fa-dot-circle-o mr-2","aria-hidden":"true"}),e.completed?r.a.createElement(r.a.Fragment,null,r.a.createElement("del",null,e.title)):r.a.createElement(r.a.Fragment,null,e.title),function(e){return r.a.createElement("span",{className:"float-right"},e.completed?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"badge badge-success m-1"},"done"),r.a.createElement("button",{type:"button",title:"Undo",className:"btn btn-sm btn-secondary mr-1",onClick:function(){return n(e)}},r.a.createElement("i",{className:"fa fa-undo","aria-hidden":"true"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"badge badge-warning m-1"}),r.a.createElement("button",{type:"button",title:"Edit",className:"btn btn-sm btn-secondary mr-1",onClick:function(){return s(e)}},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"})),r.a.createElement("button",{type:"button",title:"Mark Complete",className:"btn btn-sm btn-primary",onClick:function(){return a(e)}},r.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))),r.a.createElement("button",{type:"button",title:"Delete",className:"btn btn-sm btn-danger m-1",onClick:function(){return c(e)}},r.a.createElement("i",{className:"fa fa-trash-o"})))}(e))}))))))}var f=function(e){var t=e.label,a=e.name,n=e.value,c=e.type,s=e.onChange,o="input-"+t;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:o},t),r.a.createElement("input",{className:"form-control",type:c,value:n,name:a,onChange:s,id:o}))},v=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),m=u[0],d=u[1];Object(n.useEffect)((function(){var t=e.task;t.title?(s(t.title),d(t.title)):(s(""),d(""))}),[e.task.id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),0!==c.trim().length){var a=e.task;a.id?e.onSubmit(Object(i.a)(Object(i.a)({},a),{},{title:c,id:a.id,oldTitle:m})):e.onSubmit({title:c,id:0,completed:!1}),d(""),s("")}}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},function(){var t=e.task;return t&&0===t.id?"Add New Task":"Edit Task"}()),r.a.createElement("div",{className:"card-body"},r.a.createElement(f,{label:"Task Detail",name:"taskDetail",type:"text",value:c,onChange:function(e){s(e.currentTarget.value)}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-sm"},"Save"),r.a.createElement("button",{type:"button",className:"btn btn-warning btn-sm ml-2",onClick:function(t){t.preventDefault(),e.onCancel(),d(""),s("")}},"Cancel")))),r.a.createElement("pre",{hidden:!0},e.task.id))},E=a(10),k=a.n(E),h="https://kj0wjq2kkf.execute-api.ap-southeast-1.amazonaws.com/dev/tasks",g={headers:{"Content-type":"application/json; charset=UTF-8"}};function j(){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(h);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(h,t,g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.data=t,e.next=3,k.a.patch("".concat(h,"/").concat(t.id),t,g);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.data=t,e.next=3,k.a.delete("".concat(h,"/").concat(t.id),g);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=r.a.createContext();S.displayName="AllContext";var F=S,U={id:0};function D(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(U),m=Object(o.a)(s,2),f=m[0],E=m[1],k=Object(n.useState)([]),h=Object(o.a)(k,2),g=h[0],N=h[1],w=Object(n.useState)(!1),y=Object(o.a)(w,2),C=y[0],S=y[1],D=Object(n.useContext)(F);Object(n.useEffect)((function(){M()}),[]),Object(n.useEffect)((function(){var e=D.mode;console.log("App mode = ",e),S("NewTask"===e||"EditTask"===e)}),[D.mode]);var M=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,(a=t.data).isSuccess&&N(a.result),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s,o,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),a=Object(u.a)(g),e.prev=2,n=Object(u.a)(g),r=n.findIndex((function(e){return e.id===t.id})),(s=Object(i.a)(Object(i.a)({},n[r]),{},{oldTitle:t.title})).completed=!t.completed,n[r]=s,e.next=10,x(s);case 10:o=e.sent,m=o.data,console.log("Update response",m),m.isSuccess?(l.b.success("Task [".concat(s.title,"] has been updated.")),n[r]=Object(i.a)(Object(i.a)({},s),{},{completed:m.result.completed,title:m.result.title}),N(n)):(l.b.error("Error occured while updating task [".concat(t.title,"]. ").concat(m.error.message)),N(a)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0),l.b.error("Unable to update to do status. Error: "+e.t0);case 20:c(!1);case 21:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),a=Object(u.a)(g),e.prev=2,n=Object(u.a)(g).filter((function(e){return e.id!==t.id})),N(n),t.id===f.id&&E(Object(i.a)(Object(i.a)({},U),{},{deleted:!0})),e.next=8,T(t);case 8:r=e.sent,s=r.data,console.log("Delete response",s),s.isSuccess?l.b.success("Task [".concat(t.title,"] has been deleted.")):(l.b.error("Error occured while deleting task [".concat(t.title,"]. ").concat(s.error.message)),N(a)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0),l.b.error("Unable to delete to do. Error: "+e.t0);case 18:c(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(g.filter((function(e){return e.title.trim().toUpperCase()===t.title.trim().toUpperCase()})).length>0)){e.next=7;break}return console.error("Task already exist",t.title.trim().toUpperCase()),l.b.error("Task '".concat(t.title,"' already exist")),c(!1),e.abrupt("return");case 7:return e.next=9,O(t);case 9:a=e.sent,n=a.data,console.log(n,n.result.id),r=[].concat(Object(u.a)(g),[Object(i.a)(Object(i.a)({},t),{},{id:n.result.id})]),N(r),E(U),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),l.b.error("Unable to create to do. Error: "+e.t0);case 21:D.changeMode("NewTaskDone"),c(!1);case 23:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s,o,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(g),e.prev=1,n=Object(u.a)(g),r=n.findIndex((function(e){return e.id===t.id})),(s=Object(i.a)({},n[r])).title=t.title,e.next=8,x(t);case 8:o=e.sent,m=o.data,console.log("Update response",m),m.isSuccess?(l.b.success("Task [".concat(t.title,"] has been updated.")),n[r]=Object(i.a)(Object(i.a)({},s),{},{title:m.result.title}),N(n),E(U)):(l.b.error("Error occured while updating task [".concat(t.title,"]. ").concat(m.error.message)),N(a)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),l.b.error("Unable to update to do. Error: "+e.t0),N(a);case 19:D.changeMode("EditTaskDone"),c(!1);case 21:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),0===t.id?I(t):B(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid"},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fixed-top sc-spinner"},r.a.createElement("i",{className:"fa fa-spinner fa-spin fa-fw"}),r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"row"},C&&r.a.createElement("div",{className:"col-md"},r.a.createElement(v,{onSubmit:J,task:f,onCancel:function(e){E(U),D.changeMode("EditTaskCancelled")}})),r.a.createElement("div",{className:"col-md"},r.a.createElement(b,{tasksList:g,onTaskComplete:function(e){A(e)},onTaskUndoComplete:function(e){A(e)},onTaskDelete:L,onTaskEdit:function(e){E(Object(i.a)({},e)),D.changeMode("EditTask")}})))))}function M(){var e=Object(n.useContext)(F),t=Object(n.useState)(!0),a=Object(o.a)(t,2),c=a[0],s=a[1],l=function(t){e.changeMode(t),s(!0)};return r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"#home"},"FYM | Forgot Your Milk"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",onClick:function(e){e.preventDefault(),console.log("isCollapsed ?",c),s((function(e){return!e}))}},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:c?"collapse navbar-collapse":"collapse navbar-collapse show",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",href:"#allTasks",onClick:function(){return l("AllTasks")}},"All Tasks ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#newTask",onClick:function(){return l("NewTask")}},"New Task")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#login",onClick:function(){return l("Login")}},"Login")))))}var A=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.Provider,{value:{mode:a,changeMode:function(e){c(e),console.log(a,"---\x3e",e)}}},r.a.createElement(M,null),r.a.createElement(D,null),r.a.createElement(l.a,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(48),a(49),a(50),a(51);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.e2418ab5.chunk.js.map